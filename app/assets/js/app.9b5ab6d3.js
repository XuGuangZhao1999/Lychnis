(function(){"use strict";var e={2144:function(e,t,n){n(8858),n(1318),n(3228);var o=n(9242),a=n(3396);function l(e,t,n,o,l,i){const s=(0,a.up)("mainPage"),r=(0,a.up)("el-config-provider");return(0,a.wg)(),(0,a.j4)(r,{locale:o.store.getters["core/locale"]},{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1},8,["locale"])}const i={class:"split"},s={id:"split-0"},r={id:"split-1"};function d(e,t,n,o,l,d){const u=(0,a.up)("appHeader"),m=(0,a.up)("viewerPanel"),c=(0,a.up)("controlPanel"),p=(0,a.up)("el-container");return(0,a.wg)(),(0,a.j4)(p,{direction:"vertical"},{default:(0,a.w5)((()=>[(0,a.Wm)(u),(0,a._)("div",i,[(0,a._)("div",s,[(0,a.Wm)(m)]),(0,a._)("div",r,[(0,a.Wm)(c)])])])),_:1})}function u(e,t,n,o,l,i){const s=(0,a.up)("menuBar"),r=(0,a.up)("el-header");return(0,a.wg)(),(0,a.j4)(r,{class:"header",direction:"horizontal"},{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1})}function m(e,t,n,o,l,i){const s=(0,a.up)("fileMenu"),r=(0,a.up)("editMenu"),d=(0,a.up)("viewMenu"),u=(0,a.up)("helpMenu"),m=(0,a.up)("statusBar"),c=(0,a.up)("el-menu-item"),p=(0,a.up)("el-menu");return(0,a.wg)(),(0,a.j4)(p,{id:"menu",mode:"horizontal","background-color":"#313131","text-color":"#FFFFFF"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:1}),(0,a.Wm)(r,{index:2}),(0,a.Wm)(d,{index:3}),(0,a.Wm)(u,{index:4}),(0,a.Wm)(c,{index:"5"},{default:(0,a.w5)((()=>[(0,a.Wm)(m)])),_:1})])),_:1})}var c=n(7139);const p={key:0,id:"statusBar"};function f(e,t,n,o,l,i){return o.store.state.status.bShow?((0,a.wg)(),(0,a.iD)("label",p,(0,c.zw)(o.store.state.status.message),1)):(0,a.kq)("",!0)}var _=n(65),w={setup(){const e=(0,_.oR)();return{store:e}},name:"statusBar"},g=n(89);const v=(0,g.Z)(w,[["render",f],["__scopeId","data-v-1c3dcca4"]]);var h=v;function b(e,t,n,o,l,i){const s=(0,a.up)("el-menu-item"),r=(0,a.up)("el-divider"),d=(0,a.up)("el-sub-menu");return(0,a.wg)(),(0,a.j4)(d,{index:n.index},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.title")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"1-1",onClick:t[0]||(t[0]=e=>o.loadProject())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.load_project")),1)])),_:1}),(0,a.Wm)(s,{index:"1-2",onClick:t[1]||(t[1]=e=>o.saveProject())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.save")),1)])),_:1}),(0,a.Wm)(s,{index:"1-3"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.save_as")),1)])),_:1}),(0,a.Wm)(r,{class:"hLine"}),(0,a.Wm)(s,{index:"1-4",onClick:t[2]||(t[2]=e=>o.openImage())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.open_image_file")),1)])),_:1}),(0,a.Wm)(s,{index:"1-5"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.open_image_as_sps")),1)])),_:1}),(0,a.Wm)(s,{index:"1-6",onClick:t[3]||(t[3]=e=>o.importNodes())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.import_nodes")),1)])),_:1}),(0,a.Wm)(s,{index:"1-7"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.import_parameters")),1)])),_:1}),(0,a.Wm)(s,{index:"1-8"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.show_image_information")),1)])),_:1}),(0,a.Wm)(r,{class:"hLine"}),(0,a.Wm)(d,{index:"1-9"},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_nodes.title")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"1-9-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_nodes.imaris_format")),1)])),_:1}),(0,a.Wm)(s,{index:"1-9-2",onClick:t[4]||(t[4]=e=>o.exportNodes("lyp"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_nodes.lychnis_format")),1)])),_:1}),(0,a.Wm)(s,{index:"1-9-3",onClick:t[5]||(t[5]=e=>o.exportNodes("swc"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_nodes.swc_format")),1)])),_:1}),(0,a.Wm)(s,{index:"1-9-4"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_nodes.imaris_spots")),1)])),_:1})])),_:1}),(0,a.Wm)(s,{index:"1-10"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_animation")),1)])),_:1}),(0,a.Wm)(s,{index:"1-11"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("file.export_volume")),1)])),_:1})])),_:1},8,["index"])}var y={name:"fileMenu",props:{index:Number},setup(){const e=(0,_.oR)();function t(){let t={functionName:"loadProject",args:{}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(t){e.commit("core/setBLoaded",!0),window.showMessage("loadProject: "+t)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function n(){let e={functionName:"saveProject",args:{}};window.cefQuery({request:JSON.stringify(e),onSuccess:function(e){window.showMessage("saveProject: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function o(){let e={functionName:"openImage",args:{}};window.cefQuery({request:JSON.stringify(e),onSuccess:function(e){window.showMessage("openImage: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function a(e){let t={functionName:"importNodes",args:{format:e}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage("importNodes: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function l(e){let t={functionName:"exportNodes",args:{format:e}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage("exportNodes: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}return{store:e,loadProject:t,saveProject:n,openImage:o,importNodes:a,exportNodes:l}}};const W=(0,g.Z)(y,[["render",b]]);var x=W;function k(e,t,n,o,l,i){const s=(0,a.up)("el-menu-item"),r=(0,a.up)("el-divider"),d=(0,a.up)("el-sub-menu");return(0,a.wg)(),(0,a.j4)(d,{index:n.index},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.title")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"2-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.move_slice_by_node")),1)])),_:1}),(0,a.Wm)(s,{index:"2-2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.move_selected_node")),1)])),_:1}),(0,a.Wm)(r,{class:"hLine"}),(0,a.Wm)(s,{index:"2-3"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.create_anchor_nodes")),1)])),_:1}),(0,a.Wm)(d,{index:"2-4"},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.delete_nodes.title")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"2-4-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.delete_nodes.selected_node")),1)])),_:1}),(0,a.Wm)(s,{index:"2-4-2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.delete_nodes.all_nodes_on_selected_fiber")),1)])),_:1}),(0,a.Wm)(s,{index:"2-4-3"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.delete_nodes.all_nodes_of_selected_type")),1)])),_:1}),(0,a.Wm)(s,{index:"2-4-4"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.delete_nodes.all_nodes")),1)])),_:1})])),_:1}),(0,a.Wm)(r,{class:"hLine"}),(0,a.Wm)(s,{index:"2-5"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.build_node_groups")),1)])),_:1}),(0,a.Wm)(s,{index:"2-6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.review_nodes")),1)])),_:1}),(0,a.Wm)(s,{index:"2-7"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("edit.move_to_pending_node")),1)])),_:1})])),_:1},8,["index"])}var $={name:"editMenu",props:{index:Number},setup(){}};const z=(0,g.Z)($,[["render",k]]);var U=z;function S(e,t,n,o,l,i){const s=(0,a.up)("el-menu-item"),r=(0,a.up)("el-sub-menu");return(0,a.wg)(),(0,a.j4)(r,{index:n.index},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.title")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"3-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.show_hide_all_fibers")),1)])),_:1}),(0,a.Wm)(s,{index:"3-2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.show_hide_unselected_fibers")),1)])),_:1}),(0,a.Wm)(s,{index:"3-3"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.show_hide_current_volume")),1)])),_:1}),(0,a.Wm)(s,{index:"3-4"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.show_hide_roi_volumes")),1)])),_:1}),(0,a.Wm)(s,{index:"3-5"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.roi_settings")),1)])),_:1}),(0,a.Wm)(s,{index:"3-6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.toggle_auto_loading")),1)])),_:1}),(0,a.Wm)(s,{index:"3-7"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.display_settings")),1)])),_:1}),(0,a.Wm)(s,{index:"3-8"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("view.turn_on_off_annotation_mode")),1)])),_:1})])),_:1},8,["index"])}var N={name:"viewMenu",props:{index:Number},setup(){}};const P=(0,g.Z)(N,[["render",S]]);var I=P;function M(e,t,n,o,l,i){const s=(0,a.up)("el-menu-item"),r=(0,a.up)("el-sub-menu");return(0,a.wg)(),(0,a.j4)(r,{index:n.index},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("help.title")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"4-1",id:"debug",onClick:t[0]||(t[0]=e=>o.about())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("help.about")),1)])),_:1}),(0,a.Wm)(r,{index:"4-2"},{title:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("help.language")),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{index:"4-2-1",onClick:t[1]||(t[1]=e=>o.changeLanguage("zhCn"))},{default:(0,a.w5)((()=>[(0,a.Uk)("简体中文")])),_:1}),(0,a.Wm)(s,{index:"4-2-2",onClick:t[2]||(t[2]=e=>o.changeLanguage("en"))},{default:(0,a.w5)((()=>[(0,a.Uk)("English")])),_:1})])),_:1})])),_:1},8,["index"])}var j=n(6e3),C={name:"helpMenu",props:{index:Number},setup(){const e=(0,_.oR)();function t(){let t="Lychnis is a fiber-tracing tool for volumetric data.<br/>Developed and maintained by SMART/VISoR team (at SIAT and USTC).<br/>Contact: <a href='mailto:dinglufe@gmail.com'>dinglufe@gmail.com</a>";j.T.alert(t,"About",{confirmButtonText:"OK",type:"info",dangerouslyUseHTMLString:!0,callback:()=>{e.commit("status/showMessage","Close about!")}})}function n(t){e.commit("core/setLanguage",t),e.commit("core/setI18N",t)}return{about:t,changeLanguage:n,store:e}}};const L=(0,g.Z)(C,[["render",M]]);var O=L,H={name:"menuBar",components:{fileMenu:x,editMenu:U,viewMenu:I,helpMenu:O,statusBar:h},setup(){}};const R=(0,g.Z)(H,[["render",m]]);var F=R,Z={name:"appHeader",components:{menuBar:F}};const E=(0,g.Z)(Z,[["render",u],["__scopeId","data-v-20562d6a"]]);var B=E;function V(e,t,n,o,l,i){const s=(0,a.up)("annotationPanel"),r=(0,a.up)("animationPanel"),d=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.j4)(d,{class:"tabs",type:"border-card",stretch:"true"},{default:(0,a.w5)((()=>[(0,a.Wm)(s),(0,a.Wm)(r)])),_:1})}const A={class:"panelContainer"};function q(e,t,n,o,l,i){const s=(0,a.up)("settingsPanel"),r=(0,a.up)("geometryPanel"),d=(0,a.up)("currentNodeInfoPanel"),u=(0,a.up)("specialNodePanel"),m=(0,a.up)("el-tab-pane");return(0,a.wg)(),(0,a.j4)(m,{label:e.$t("annotation.title")},{default:(0,a.w5)((()=>[(0,a._)("div",A,[(0,a.Wm)(s),(0,a.Wm)(r),(0,a.Wm)(d),(0,a.Wm)(u)])])),_:1},8,["label"])}const T={class:"cardHeader"};function D(e,t,n,o,l,i){const s=(0,a.up)("el-option"),r=(0,a.up)("el-select"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-input"),m=(0,a.up)("el-form"),p=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(p,{shadow:"never"},{header:(0,a.w5)((()=>[(0,a._)("div",T,[(0,a._)("span",null,(0,c.zw)(e.$t("annotation.settings.title")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(m,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:e.$t("annotation.settings.annotation_channel")},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:"通道1",value:"1"}),(0,a.Wm)(s,{label:"通道2",value:"2"}),(0,a.Wm)(s,{label:"通道3",value:"3"}),(0,a.Wm)(s,{label:"通道4",value:"4"})])),_:1})])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("annotation.settings.annotation_type")},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:e.$t("annotation.type.line"),value:"line"},null,8,["label"]),(0,a.Wm)(s,{label:e.$t("annotation.type.point"),value:"point"},null,8,["label"]),(0,a.Wm)(s,{label:e.$t("annotation.type.moveSelectedNode"),value:"moveSelectedNode"},null,8,["label"])])),_:1})])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("annotation.settings.slice_thickness")},{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("annotation.settings.user_name")},{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1},8,["label"])])),_:1})])),_:1})}var Y={name:"settingsPanel",props:{},setup(){return{}}};const J=(0,g.Z)(Y,[["render",D]]);var Q=J;const K={class:"cardHeader"},X={style:{display:"flex"}},G={style:{display:"flex"}};function ee(e,t,n,o,l,i){const s=(0,a.up)("el-button"),r=(0,a.up)("el-option"),d=(0,a.up)("el-select"),u=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),p=(0,a.up)("el-form"),f=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(f,null,{header:(0,a.w5)((()=>[(0,a._)("div",K,[(0,a._)("span",null,(0,c.zw)(e.$t("annotation.geometry.title")),1),(0,a.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("annotation.geometry.advanced")),1)])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:e.$t("annotation.geometry.block_size")},{default:(0,a.w5)((()=>[(0,a._)("div",X,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"256x256x256"})])),_:1}),(0,a.Wm)(u,{type:"number"}),(0,a.Wm)(u,{type:"number"})])])),_:1},8,["label"]),(0,a.Wm)(m,{label:e.$t("annotation.geometry.center")},{default:(0,a.w5)((()=>[(0,a._)("div",G,[(0,a.Wm)(u,{type:"number"}),(0,a.Wm)(u,{type:"number"}),(0,a.Wm)(u,{type:"number"})])])),_:1},8,["label"])])),_:1})])),_:1})}var te={name:"geometryPanel",props:{},setup(){return{}}};const ne=(0,g.Z)(te,[["render",ee],["__scopeId","data-v-216feb13"]]);var oe=ne;const ae={class:"cardHeader"},le={style:{display:"flex"}},ie={style:{display:"flex"}},se={style:{display:"flex"}};function re(e,t,n,o,l,i){const s=(0,a.up)("el-input"),r=(0,a.up)("el-form-item"),d=(0,a.up)("el-option"),u=(0,a.up)("el-select"),m=(0,a.up)("el-color-picker"),p=(0,a.up)("el-form"),f=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(f,null,{header:(0,a.w5)((()=>[(0,a._)("div",ae,[(0,a._)("span",null,(0,c.zw)(e.$t("annotation.selected_node.title")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:e.$t("annotation.selected_node.node_id")},{default:(0,a.w5)((()=>[(0,a._)("div",le,[(0,a.Wm)(s),(0,a.Wm)(s,{placeholder:e.$t("placeholder.searchNodeId")},null,8,["placeholder"])])])),_:1},8,["label"]),(0,a.Wm)(r,{label:e.$t("annotation.selected_node.node_type")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"None",value:"1"})])),_:1})])),_:1},8,["label"]),(0,a.Wm)(r,{label:e.$t("annotation.selected_node.message")},{default:(0,a.w5)((()=>[(0,a._)("div",ie,[(0,a.Wm)(s,{placeholder:e.$t("placeholder.pressEnter")},null,8,["placeholder"]),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"Sure",value:"1"})])),_:1})])])),_:1},8,["label"]),(0,a.Wm)(r,{label:e.$t("annotation.selected_node.creator")},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{type:"text"})])),_:1},8,["label"]),(0,a.Wm)(r,{label:e.$t("annotation.selected_node.color")},{default:(0,a.w5)((()=>[(0,a._)("div",se,[(0,a.Wm)(s,{type:"text"}),(0,a.Wm)(m,{modelValue:o.nodeColor,"onUpdate:modelValue":t[0]||(t[0]=e=>o.nodeColor=e)},null,8,["modelValue"])])])),_:1},8,["label"]),(0,a.Wm)(r,{label:e.$t("annotation.selected_node.coordinate")},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{type:"text"})])),_:1},8,["label"])])),_:1})])),_:1})}var de={name:"currentNodeInfoPanel",props:{name:{type:String}},setup(){const e="#00FF00";return{nodeColor:e}}};const ue=(0,g.Z)(de,[["render",re]]);var me=ue;const ce={class:"cardHeader"};function pe(e,t,n,o,l,i){const s=(0,a.up)("el-button"),r=(0,a.up)("el-table-column"),d=(0,a.up)("el-table"),u=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(u,null,{header:(0,a.w5)((()=>[(0,a._)("div",ce,[(0,a._)("span",null,(0,c.zw)(e.$t("annotation.special_nodes.title")),1),(0,a._)("div",null,[(0,a.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("annotation.special_nodes.filter")),1)])),_:1}),(0,a.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("annotation.special_nodes.pop")),1)])),_:1})])])])),default:(0,a.w5)((()=>[(0,a.Wm)(d,{border:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:e.$t("annotation.special_nodes.id")},null,8,["label"]),(0,a.Wm)(r,{label:e.$t("annotation.special_nodes.message")},null,8,["label"])])),_:1})])),_:1})}var fe={name:"specialNodePanel",props:{},setup(){return{}}};const _e=(0,g.Z)(fe,[["render",pe]]);var we=_e,ge={name:"annotationPanel",components:{settingsPanel:Q,geometryPanel:oe,currentNodeInfoPanel:me,specialNodePanel:we},setup(){}};const ve=(0,g.Z)(ge,[["render",q]]);var he=ve;const be={class:"panelContainer"};function ye(e,t,n,o,l,i){const s=(0,a.up)("keyframeSettingsPanel"),r=(0,a.up)("allKeyfamesPanel"),d=(0,a.up)("allFramesPanel"),u=(0,a.up)("scriptPanel"),m=(0,a.up)("el-tab-pane");return(0,a.wg)(),(0,a.j4)(m,{label:e.$t("animation.title")},{default:(0,a.w5)((()=>[(0,a._)("div",be,[(0,a.Wm)(s,{name:5}),(0,a.Wm)(r,{name:6}),(0,a.Wm)(d,{name:7}),(0,a.Wm)(u,{name:8})])])),_:1},8,["label"])}const We={class:"cardHeader"};function xe(e,t,n,o,l,i){const s=(0,a.up)("el-button"),r=(0,a.up)("el-input"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-form"),m=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(m,null,{header:(0,a.w5)((()=>[(0,a._)("div",We,[(0,a._)("span",null,(0,c.zw)(e.$t("animation.keyframe.title")),1),(0,a._)("div",null,[(0,a.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.keyframe.new")),1)])),_:1}),(0,a.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.keyframe.modify")),1)])),_:1})])])])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:e.$t("animation.keyframe.index_keyframes")},{default:(0,a.w5)((()=>[(0,a.Wm)(r)])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("animation.keyframe.index_all_frames")},{default:(0,a.w5)((()=>[(0,a.Wm)(r)])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("animation.keyframe.created_time")},{default:(0,a.w5)((()=>[(0,a.Wm)(r)])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("animation.keyframe.duration_frames")},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{placeholder:"0"})])),_:1},8,["label"]),(0,a.Wm)(d,{label:e.$t("animation.keyframe.notes")},{default:(0,a.w5)((()=>[(0,a.Wm)(r)])),_:1},8,["label"])])),_:1})])),_:1})}var ke={name:"keyframeSettingsPanel",props:{name:{type:String}},setup(){return{}}};const $e=(0,g.Z)(ke,[["render",xe]]);var ze=$e;const Ue={class:"cardHeader"};function Se(e,t,n,o,l,i){const s=(0,a.up)("el-table-column"),r=(0,a.up)("el-table"),d=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(d,null,{header:(0,a.w5)((()=>[(0,a._)("div",Ue,[(0,a._)("span",null,(0,c.zw)(e.$t("animation.all_keyframes.title")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{border:"","label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{label:e.$t("animation.all_keyframes.index")},null,8,["label"]),(0,a.Wm)(s,{label:e.$t("animation.all_keyframes.created_time")},null,8,["label"]),(0,a.Wm)(s,{label:e.$t("animation.all_keyframes.notes")},null,8,["label"])])),_:1})])),_:1})}var Ne={name:"allKeyfamesPanel",props:{},setup(){return{}}};const Pe=(0,g.Z)(Ne,[["render",Se]]);var Ie=Pe;const Me={class:"cardHeader"};function je(e,t,n,o,l,i){const s=(0,a.up)("el-slider"),r=(0,a.up)("el-button"),d=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(d,null,{header:(0,a.w5)((()=>[(0,a._)("div",Me,[(0,a._)("span",null,(0,c.zw)(e.$t("animation.all_frames.title")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.frameIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>o.frameIndex=e),"show-input":"",size:"small"},null,8,["modelValue"]),(0,a.Wm)(r,{type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.all_frames.previous_keyframe")),1)])),_:1}),(0,a.Wm)(r,{type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.all_frames.next_keyframe")),1)])),_:1})])),_:1})}var Ce=n(4870),Le={name:"allFramesPanel",props:{name:{type:String}},setup(){const e=(0,Ce.iH)(0);return{frameIndex:e}}};const Oe=(0,g.Z)(Le,[["render",je]]);var He=Oe;const Re={class:"cardHeader"};function Fe(e,t,n,o,l,i){const s=(0,a.up)("el-input"),r=(0,a.up)("el-button"),d=(0,a.up)("el-form-item"),u=(0,a.up)("el-form"),m=(0,a.up)("el-card");return(0,a.wg)(),(0,a.j4)(m,null,{header:(0,a.w5)((()=>[(0,a._)("div",Re,[(0,a._)("span",null,(0,c.zw)(e.$t("animation.script.title")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{"label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s),(0,a.Wm)(r,{type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.script.browse")),1)])),_:1})])),_:1}),(0,a.Wm)(r,{type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.script.export_template")),1)])),_:1}),(0,a.Wm)(r,{type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.script.reload")),1)])),_:1}),(0,a.Wm)(r,{type:"text"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,c.zw)(e.$t("animation.script.insert_current_state")),1)])),_:1})])),_:1})])),_:1})}var Ze={name:"scriptPanel",props:{name:{type:String}},setup(){return{}}};const Ee=(0,g.Z)(Ze,[["render",Fe]]);var Be=Ee,Ve={name:"animationPanel",components:{keyframeSettingsPanel:ze,allKeyfamesPanel:Ie,allFramesPanel:He,scriptPanel:Be},setup(){}};const Ae=(0,g.Z)(Ve,[["render",ye]]);var qe=Ae,Te={name:"controlPanel",components:{annotationPanel:he,animationPanel:qe},setup(){}};const De=(0,g.Z)(Te,[["render",V]]);var Ye=De;const Je={class:"flexLayout"},Qe={key:0,class:"constrast"},Ke={class:"wrapper"},Xe={id:"viewer",class:"imageContainer",ref:"canvas",width:"1600",height:"1200"},Ge={key:1,style:{display:"flex","justify-content":"center","background-color":"#313131"}};function et(e,t,n,l,i,s){const r=(0,a.up)("el-color-picker"),d=(0,a.up)("el-slider");return(0,a.wg)(),(0,a.iD)("div",Je,[l.store.state.core.bLoaded?((0,a.wg)(),(0,a.iD)("div",Qe,[(0,a.Wm)(r,{modelValue:l.color,"onUpdate:modelValue":t[0]||(t[0]=e=>l.color=e),"show-alpha":""},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:l.lower,"onUpdate:modelValue":t[1]||(t[1]=e=>l.lower=e),"show-input":"",size:"small",onWheel:l.lHandlerWheel,onInput:l.updateConstrast,debounce:100,max:l.upper},null,8,["modelValue","onWheel","onInput","max"]),(0,a.Wm)(d,{modelValue:l.upper,"onUpdate:modelValue":t[2]||(t[2]=e=>l.upper=e),"show-input":"",size:"small",onWheel:l.uHandlerWheel,onInput:l.updateConstrast,debounce:100,max:65535},null,8,["modelValue","onWheel","onInput"])])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",Ke,[(0,a._)("canvas",Xe,null,512)],512),[[o.F8,l.store.state.core.bLoaded]]),l.store.state.core.bLoaded?((0,a.wg)(),(0,a.iD)("div",Ge,[(0,a.Wm)(d,{modelValue:l.currentLevel,"onUpdate:modelValue":t[3]||(t[3]=e=>l.currentLevel=e),onInput:l.resolutionNumberChanged,"show-input":"true",debounce:100,max:l.store.state.core.levels,size:"small"},null,8,["modelValue","onInput","max"])])):(0,a.kq)("",!0)])}var tt={name:"viewerPanel",setup(){const e=(0,Ce.iH)("rgva(19, 206, 102, 0.8)"),t=(0,_.oR)(),n=(0,Ce.iH)(t.state.core.levels-1),o=(0,Ce.iH)(t.state.core.constrastRange.lower),a=(0,Ce.iH)(t.state.core.constrastRange.upper),l=(0,Ce.iH)(0);function i(){t.commit("core/setConstrastRange",{index:l.value,lower:o.value,upper:a.value})}function s(e){e.deltaY>0?o.value-=1:o.value+=1,i()}function r(e){e.deltaY>0?a.value-=1:a.value+=1,i()}function d(){let e={functionName:"resolutionChange",args:{currentLevel:n}};window.cefQuery({request:JSON.stringify(e),onSuccess:function(e){window.showMessage("Resolution change: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}return{color:e,store:t,currentLevel:n,lower:o,upper:a,channel:l,lHandlerWheel:s,uHandlerWheel:r,updateConstrast:i,resolutionNumberChanged:d}},mounted(){let e=this.$refs.canvas,t=e.getContext("2d");t.fillStyle="#000000",t.fillRect(0,0,e.width,e.height);let n=e.width/e.offsetWidth,o=e.height/e.offsetHeight,a=new ResizeObserver((()=>{window.requestAnimationFrame((()=>{n=e.width/e.offsetWidth,o=e.height/e.offsetHeight}))}));a.observe(e);const l=function(e){let t={};return t["Shift"]=e.shiftKey,t["Control"]=e.ctrlKey,t};e.addEventListener("mousedown",(function(e){let t={functionName:"mousePressEvent",args:{button:e.button,posX:e.offsetX*n,posY:e.offsetY*o,modifier:l(e)}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage(e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}),!1),e.addEventListener("mouseup",(function(e){let t={functionName:"mouseReleaseEvent",args:{button:e.button,posX:e.offsetX*n,posY:e.offsetY*o,modifier:l(e)}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage(e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}),!1),e.addEventListener("mousemove",(function(e){if(0!==e.buttons){let t=0;switch(e.buttons){case 1:t=0;break;case 2:t=2;break;case 4:t=1;break;default:t=0;break}let a={functionName:"mouseMoveEvent",args:{button:t,posX:e.offsetX*n,posY:e.offsetY*o,modifier:l(e)}};window.cefQuery({request:JSON.stringify(a),onSuccess:function(e){window.showMessage(e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}}),!1),e.addEventListener("wheel",(function(e){let t={functionName:"wheelEvent",args:{deltaY:-e.deltaY,posX:e.offsetX*n,posY:e.offsetY*o}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage("Wheel event: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}),!1)}};const nt=(0,g.Z)(tt,[["render",et],["__scopeId","data-v-7bc44301"]]);var ot=nt,at=n(3625),lt={name:"mainPage",components:{appHeader:B,controlPanel:Ye,viewerPanel:ot},mounted(){(0,at.Z)(["#split-0","#split-1"],{sizes:[70,30],minSize:300,gutterSize:1,direction:"horizontal",cursor:"col-resize"})}};const it=(0,g.Z)(lt,[["render",d],["__scopeId","data-v-209f4294"]]);var st=it,rt={name:"App",components:{mainPage:st},setup(){const e=(0,_.oR)();return document.addEventListener("contextmenu",(function(e){e.preventDefault()})),{store:e}}};const dt=(0,g.Z)(rt,[["render",l]]);var ut=dt,mt=n(5243),ct=(n(4415),n(814)),pt=n(7392),ft=n(7853),_t={file:{title:"文件",load_project:"加载工程文件",save:"保存工程",save_as:"工程另存为...",open_image_file:"打开图像文件",open_image_as_sps:"以sps形式打开图像",import_nodes:"导入节点",import_parameters:"导入参数",show_image_information:"图像信息",export_nodes:{title:"导出节点",imaris_format:"Imaris格式",lychnis_format:"Lychnis格式",swc_format:"swc格式",imaris_spots:"Imaris spots格式"},export_animation:"生成动画",export_volume:"导出图像"},edit:{title:"编辑",move_slice_by_node:"根据节点移动脑片",move_selected_node:"移动选中的节点",create_anchor_nodes:"创建定位节点",delete_nodes:{title:"删除节点",selected_node:"选中的节点",all_nodes_on_selected_fiber:"选中的纤维上所有节点",all_nodes_of_selected_type:"选中节点类型的所有节点",all_nodes:"所有节点"},build_node_groups:"生成节点分组",review_nodes:"节点检查",move_to_pending_node:"移动到下一个待标注节点"},view:{title:"视图",show_hide_all_fibers:"显示/隐藏所有节点",show_hide_unselected_fibers:"显示/隐藏未选中的节点",show_hide_current_volume:"显示/隐藏当前图像块",show_hide_roi_volumes:"显示/隐藏ROI数据块",roi_settings:"ROI设置",toggle_auto_loading:"切换自动加载",display_settings:"显示设置",turn_on_off_annotation_mode:"开启/关闭标注模式"},help:{title:"帮助",about:"关于",language:"语言"},annotation:{title:"标注通道",settings:{title:"设置",annotation_channel:"标注通道",annotation_type:"标注类型",slice_thickness:"切片厚度",user_name:"用户名"},geometry:{title:"位置与坐标",advanced:"高级",block_size:"数据块大小",center:"中心"},selected_node:{title:"当前节点信息",node_id:"编号",node_type:"类型",message:"信息",creator:"创建者",color:"颜色",coordinate:"坐标"},special_nodes:{title:"特殊节点",filter:"过滤",pop:"弹出",id:"编号",message:"信息"},type:{title:"类型",line:"线段",point:"点",moveSelectedNode:"移动选中的节点"}},animation:{title:"动画",keyframe:{title:"关键帧",new:"新建",modify:"修改",index_keyframes:"序号（关键帧）",index_all_frames:"序号（所有帧）",created_time:"创建时间",duration_frames:"时长（帧数）*",notes:"备注*"},all_keyframes:{title:"所有关键帧",index:"序号",created_time:"创建时间",notes:"备注"},all_frames:{title:"所有帧",previous_keyframe:"上一个关键帧",next_keyframe:"下一个关键帧"},script:{title:"脚本",browse:"浏览",export_template:"导出模板",reload:"重新加载",insert_current_state:"添加当前状态"}},placeholder:{searchNodeId:"搜索的节点编号",pressEnter:"输入完成后按回车键"}},wt={file:{title:"File",load_project:"Load project",save:"Save project",save_as:"Save project as...",open_image_file:"Open image file",open_image_as_sps:"Open image as sps",import_nodes:"Import nodes",import_parameters:"Import parameters",show_image_information:"Show image information",export_nodes:{title:"Export nodes to file",imaris_format:"Imaris format",lychnis_format:"Lychnis format",swc_format:"swc format",imaris_spots:"Imaris spots"},export_animation:"Export animation",export_volume:"Export volume"},edit:{title:"Edit",move_slice_by_node:"Move slice by node",move_selected_node:"Move selected node",create_anchor_nodes:"Create anchor nodes",delete_nodes:{title:"Delete nodes",selected_node:"Selected node",all_nodes_on_selected_fiber:"All nodes on selected fiber",all_nodes_of_selected_type:"All nodes of selected type",all_nodes:"All nodes"},build_node_groups:"Build node groups",review_nodes:"Review nodes",move_to_pending_node:"Move to pending node"},view:{title:"View",show_hide_all_fibers:"Show/Hide all fibers",show_hide_unselected_fibers:"Show/Hide unselected fibers",show_hide_current_volume:"Show/Hide current volume",show_hide_roi_volumes:"Show/Hide ROI volumes",roi_settings:"ROI settings",toggle_auto_loading:"Toggle auto loading",display_settings:"Display settings",turn_on_off_annotation_mode:"Turn on/off annotation mode"},help:{title:"Help",about:"About",language:"Language"},annotation:{title:"Annotation",settings:{title:"Settings",annotation_channel:"Annotation channel",annotation_type:"Annotation type",slice_thickness:"Slice thickness",user_name:"User name"},geometry:{title:"Geometry",advanced:"Advanced",block_size:"Block size",center:"Center"},selected_node:{title:"Selected node",node_id:"Node ID",node_type:"Node type",message:"Message",creator:"Creator",color:"Color",coordinate:"Coordinate"},special_nodes:{title:"Special nodes",filter:"Filter",pop:"Pop",id:"ID",message:"Message"},type:{title:"Type",line:"Line",point:"Point",moveSelectedNode:"Move selected node"}},animation:{title:"Animation",keyframe:{title:"Keyframe",new:"New",modify:"Modify",index_keyframes:"Index (Keyframes)",index_all_frames:"Index (All frames)",created_time:"Created time",duration_frames:"Duration (frames)*",notes:"Notes*"},all_keyframes:{title:"All keyframes",index:"Index",created_time:"Created time",notes:"Notes"},all_frames:{title:"All frames",previous_keyframe:"Previous keyframe",next_keyframe:"Next keyframe"},script:{title:"Script",browse:"Browse",export_template:"Export template",reload:"Reload",insert_current_state:"Insert current state"}},placeholder:{searchNodeId:"Search node ID",pressEnter:"Press Enter when done"}};const gt={zhCn:_t,en:wt},vt=new ft.o({locale:"en",messages:gt});var ht=vt;window.paint=function(e){let t=new Blob([e],{type:"image/jpeg"}),n=new Image;n.src=URL.createObjectURL(t),n.onload=function(){let e=document.getElementById("viewer"),t=e.getContext("2d");t.drawImage(n,0,0)}},window.showMessage=function(e){Wt.commit("status/showMessage",e)};const bt={namespaced:!0,state(){return{language:"en",I18N:ht,bLoaded:!0,levels:1,constrastRange:{lower:100,upper:1e3}}},mutations:{setLanguage(e,t){e.language=t},setI18N(e,t){e.I18N.global.locale=t},setBLoaded(e,t){e.bLoaded=t},setLevels(e,t){e.levels=t},setConstrastRange(e,t){e.constrastRange.lower=t.lower,e.constrastRange.upper=t.upper;let n={functionName:"constrastChanged",args:{index:t.index,v1:e.constrastRange.lower,v2:e.constrastRange.upper}};window.cefQuery({request:JSON.stringify(n),onSuccess:function(e){window.showMessage("constrast change: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}},getters:{locale(e){return"zhCn"===e.language?ct.Z:pt.Z}}},yt={namespaced:!0,state(){return{message:"Status",bShow:!0}},mutations:{showMessage(e,t){e.message=t,e.bShow=!0,setTimeout((()=>{e.bShow=!1}),3e3)}}},Wt=(0,_.MT)({modules:{status:yt,core:bt}}),xt=(0,o.ri)(ut);xt.use(mt.Z,{locale:Wt.getters["core/locale"]}),xt.use(Wt),xt.use(ht),xt.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,l){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],l=e[u][2];for(var s=!0,r=0;r<o.length;r++)(!1&l||i>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(s=!1,l<i&&(i=l));if(s){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,i=o[0],s=o[1],r=o[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(r)var u=r(n)}for(t&&t(o);d<i.length;d++)l=i[d],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},o=self["webpackChunklychnis_web_app"]=self["webpackChunklychnis_web_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(2144)}));o=n.O(o)})();
//# sourceMappingURL=app.9b5ab6d3.js.map