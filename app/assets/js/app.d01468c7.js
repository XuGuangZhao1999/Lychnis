(function(){"use strict";var e={268:function(e,t,n){n(8858),n(1318),n(3228);var a=n(9242),l=n(3396);function o(e,t,n,a,o,i){const s=(0,l.up)("mainPage"),r=(0,l.up)("el-config-provider");return(0,l.wg)(),(0,l.j4)(r,{locale:a.store.getters["core/locale"]},{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1},8,["locale"])}const i={class:"split"},s={id:"split-0"},r={id:"split-1"};function d(e,t,n,a,o,d){const u=(0,l.up)("appHeader"),c=(0,l.up)("viewerPanel"),m=(0,l.up)("controlPanel"),p=(0,l.up)("el-container");return(0,l.wg)(),(0,l.j4)(p,{direction:"vertical"},{default:(0,l.w5)((()=>[(0,l.Wm)(u),(0,l._)("div",i,[(0,l._)("div",s,[(0,l.Wm)(c)]),(0,l._)("div",r,[(0,l.Wm)(m)])])])),_:1})}function u(e,t,n,a,o,i){const s=(0,l.up)("menuBar"),r=(0,l.up)("el-header");return(0,l.wg)(),(0,l.j4)(r,{class:"header",direction:"horizontal"},{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1})}function c(e,t,n,a,o,i){const s=(0,l.up)("fileMenu"),r=(0,l.up)("editMenu"),d=(0,l.up)("viewMenu"),u=(0,l.up)("helpMenu"),c=(0,l.up)("statusBar"),m=(0,l.up)("el-menu-item"),p=(0,l.up)("el-menu");return(0,l.wg)(),(0,l.j4)(p,{id:"menu",mode:"horizontal","background-color":"#313131","text-color":"#FFFFFF"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:1}),(0,l.Wm)(r,{index:2}),(0,l.Wm)(d,{index:3}),(0,l.Wm)(u,{index:4}),(0,l.Wm)(m,{index:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1})])),_:1})}var m=n(7139);const p={key:0,id:"statusBar"};function f(e,t,n,a,o,i){return a.store.state.status.bShow?((0,l.wg)(),(0,l.iD)("label",p,(0,m.zw)(a.store.state.status.message),1)):(0,l.kq)("",!0)}var w=n(65),_={setup(){const e=(0,w.oR)();return{store:e}},name:"statusBar"},h=n(89);const g=(0,h.Z)(_,[["render",f],["__scopeId","data-v-1c3dcca4"]]);var v=g;function b(e,t,n,a,o,i){const s=(0,l.up)("el-menu-item"),r=(0,l.up)("el-divider"),d=(0,l.up)("el-sub-menu");return(0,l.wg)(),(0,l.j4)(d,{index:n.index},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.title")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"1-1",onClick:t[0]||(t[0]=e=>a.loadProject())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.load_project")),1)])),_:1}),(0,l.Wm)(s,{index:"1-2",onClick:t[1]||(t[1]=e=>a.saveProject())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.save")),1)])),_:1}),(0,l.Wm)(s,{index:"1-3"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.save_as")),1)])),_:1}),(0,l.Wm)(r,{class:"hLine"}),(0,l.Wm)(s,{index:"1-4",onClick:t[2]||(t[2]=e=>a.openImage())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.open_image_file")),1)])),_:1}),(0,l.Wm)(s,{index:"1-5"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.open_image_as_sps")),1)])),_:1}),(0,l.Wm)(s,{index:"1-6",onClick:t[3]||(t[3]=e=>a.importNodes())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.import_nodes")),1)])),_:1}),(0,l.Wm)(s,{index:"1-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.import_parameters")),1)])),_:1}),(0,l.Wm)(s,{index:"1-8"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.show_image_information")),1)])),_:1}),(0,l.Wm)(r,{class:"hLine"}),(0,l.Wm)(d,{index:"1-9"},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_nodes.title")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"1-9-1"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_nodes.imaris_format")),1)])),_:1}),(0,l.Wm)(s,{index:"1-9-2",onClick:t[4]||(t[4]=e=>a.exportNodes("lyp"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_nodes.lychnis_format")),1)])),_:1}),(0,l.Wm)(s,{index:"1-9-3",onClick:t[5]||(t[5]=e=>a.exportNodes("swc"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_nodes.swc_format")),1)])),_:1}),(0,l.Wm)(s,{index:"1-9-4"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_nodes.imaris_spots")),1)])),_:1})])),_:1}),(0,l.Wm)(s,{index:"1-10"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_animation")),1)])),_:1}),(0,l.Wm)(s,{index:"1-11"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("file.export_volume")),1)])),_:1})])),_:1},8,["index"])}var x={name:"fileMenu",props:{index:Number},setup(){const e=(0,w.oR)();function t(){let t={functionName:"loadProject",args:{}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(t){e.commit("core/setBLoaded",!0),window.showMessage("loadProject: "+t)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function n(){let e={functionName:"saveProject",args:{}};window.cefQuery({request:JSON.stringify(e),onSuccess:function(e){window.showMessage("saveProject: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function a(){let t={functionName:"openImage",args:{}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(t){window.showMessage("openImage: "+t),e.commit("core/setBLoaded",!0)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function l(e){let t={functionName:"importNodes",args:{format:e}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage("importNodes: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}function o(e){let t={functionName:"exportNodes",args:{format:e}};window.cefQuery({request:JSON.stringify(t),onSuccess:function(e){window.showMessage("exportNodes: "+e)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}return{store:e,loadProject:t,saveProject:n,openImage:a,importNodes:l,exportNodes:o}}};const y=(0,h.Z)(x,[["render",b]]);var k=y;function W(e,t,n,a,o,i){const s=(0,l.up)("el-menu-item"),r=(0,l.up)("el-divider"),d=(0,l.up)("el-sub-menu");return(0,l.wg)(),(0,l.j4)(d,{index:n.index},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.title")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"2-1"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.move_slice_by_node")),1)])),_:1}),(0,l.Wm)(s,{index:"2-2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.move_selected_node")),1)])),_:1}),(0,l.Wm)(r,{class:"hLine"}),(0,l.Wm)(s,{index:"2-3"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.create_anchor_nodes")),1)])),_:1}),(0,l.Wm)(d,{index:"2-4"},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.delete_nodes.title")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"2-4-1"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.delete_nodes.selected_node")),1)])),_:1}),(0,l.Wm)(s,{index:"2-4-2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.delete_nodes.all_nodes_on_selected_fiber")),1)])),_:1}),(0,l.Wm)(s,{index:"2-4-3"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.delete_nodes.all_nodes_of_selected_type")),1)])),_:1}),(0,l.Wm)(s,{index:"2-4-4"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.delete_nodes.all_nodes")),1)])),_:1})])),_:1}),(0,l.Wm)(r,{class:"hLine"}),(0,l.Wm)(s,{index:"2-5"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.build_node_groups")),1)])),_:1}),(0,l.Wm)(s,{index:"2-6"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.review_nodes")),1)])),_:1}),(0,l.Wm)(s,{index:"2-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("edit.move_to_pending_node")),1)])),_:1})])),_:1},8,["index"])}var z={name:"editMenu",props:{index:Number},setup(){}};const S=(0,h.Z)(z,[["render",W]]);var C=S;function $(e,t,n,a,o,i){const s=(0,l.up)("el-menu-item"),r=(0,l.up)("el-sub-menu");return(0,l.wg)(),(0,l.j4)(r,{index:n.index},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.title")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"3-1"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.show_hide_all_fibers")),1)])),_:1}),(0,l.Wm)(s,{index:"3-2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.show_hide_unselected_fibers")),1)])),_:1}),(0,l.Wm)(s,{index:"3-3"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.show_hide_current_volume")),1)])),_:1}),(0,l.Wm)(s,{index:"3-4"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.show_hide_roi_volumes")),1)])),_:1}),(0,l.Wm)(s,{index:"3-5"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.roi_settings")),1)])),_:1}),(0,l.Wm)(s,{index:"3-6"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.toggle_auto_loading")),1)])),_:1}),(0,l.Wm)(s,{index:"3-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.display_settings")),1)])),_:1}),(0,l.Wm)(s,{index:"3-8"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("view.turn_on_off_annotation_mode")),1)])),_:1})])),_:1},8,["index"])}var N={name:"viewMenu",props:{index:Number},setup(){}};const U=(0,h.Z)(N,[["render",$]]);var I=U;function P(e,t,n,a,o,i){const s=(0,l.up)("el-menu-item"),r=(0,l.up)("el-sub-menu");return(0,l.wg)(),(0,l.j4)(r,{index:n.index},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("help.title")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"4-1",id:"debug",onClick:t[0]||(t[0]=e=>a.about())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("help.about")),1)])),_:1}),(0,l.Wm)(r,{index:"4-2"},{title:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("help.language")),1)])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{index:"4-2-1",onClick:t[1]||(t[1]=e=>a.changeLanguage("zhCn"))},{default:(0,l.w5)((()=>[(0,l.Uk)("简体中文")])),_:1}),(0,l.Wm)(s,{index:"4-2-2",onClick:t[2]||(t[2]=e=>a.changeLanguage("en"))},{default:(0,l.w5)((()=>[(0,l.Uk)("English")])),_:1})])),_:1})])),_:1},8,["index"])}var L=n(6e3),M={name:"helpMenu",props:{index:Number},setup(){const e=(0,w.oR)();function t(){let t="Lychnis is a fiber-tracing tool for volumetric data.<br/>Developed and maintained by SMART/VISoR team (at SIAT and USTC).<br/>Contact: <a href='mailto:dinglufe@gmail.com'>dinglufe@gmail.com</a>";L.T.alert(t,"About",{confirmButtonText:"OK",type:"info",dangerouslyUseHTMLString:!0,callback:()=>{e.commit("status/showMessage","Close about!")}})}function n(t){e.commit("core/setLanguage",t),e.commit("core/setI18N",t)}return{about:t,changeLanguage:n,store:e}}};const F=(0,h.Z)(M,[["render",P]]);var j=F,R={name:"menuBar",components:{fileMenu:k,editMenu:C,viewMenu:I,helpMenu:j,statusBar:v},setup(){}};const E=(0,h.Z)(R,[["render",c]]);var O=E,B={name:"appHeader",components:{menuBar:O}};const H=(0,h.Z)(B,[["render",u],["__scopeId","data-v-20562d6a"]]);var V=H;function A(e,t,n,a,o,i){const s=(0,l.up)("annotationPanel"),r=(0,l.up)("animationPanel"),d=(0,l.up)("el-tabs");return(0,l.wg)(),(0,l.j4)(d,{class:"tabs",type:"border-card",stretch:"true"},{default:(0,l.w5)((()=>[(0,l.Wm)(s),(0,l.Wm)(r)])),_:1})}const Z={class:"panelContainer"};function D(e,t,n,a,o,i){const s=(0,l.up)("settingsPanel"),r=(0,l.up)("geometryPanel"),d=(0,l.up)("currentNodeInfoPanel"),u=(0,l.up)("specialNodePanel"),c=(0,l.up)("el-tab-pane");return(0,l.wg)(),(0,l.j4)(c,{label:e.$t("annotation.title")},{default:(0,l.w5)((()=>[(0,l._)("div",Z,[(0,l.Wm)(s),(0,l.Wm)(r),(0,l.Wm)(d),(0,l.Wm)(u)])])),_:1},8,["label"])}const T={class:"cardHeader"};function q(e,t,n,a,o,i){const s=(0,l.up)("el-option"),r=(0,l.up)("el-select"),d=(0,l.up)("el-form-item"),u=(0,l.up)("el-input"),c=(0,l.up)("el-form"),p=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(p,{shadow:"never"},{header:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l._)("span",null,(0,m.zw)(e.$t("annotation.settings.title")),1)])])),default:(0,l.w5)((()=>[(0,l.Wm)(c,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:e.$t("annotation.settings.annotation_channel")},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:"通道1",value:"1"}),(0,l.Wm)(s,{label:"通道2",value:"2"}),(0,l.Wm)(s,{label:"通道3",value:"3"}),(0,l.Wm)(s,{label:"通道4",value:"4"})])),_:1})])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("annotation.settings.annotation_type")},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:e.$t("annotation.type.line"),value:"line"},null,8,["label"]),(0,l.Wm)(s,{label:e.$t("annotation.type.point"),value:"point"},null,8,["label"]),(0,l.Wm)(s,{label:e.$t("annotation.type.moveSelectedNode"),value:"moveSelectedNode"},null,8,["label"])])),_:1})])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("annotation.settings.slice_thickness")},{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("annotation.settings.user_name")},{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1},8,["label"])])),_:1})])),_:1})}var Y={name:"settingsPanel",props:{},setup(){return{}}};const J=(0,h.Z)(Y,[["render",q]]);var Q=J;const K={class:"cardHeader"},X={style:{display:"flex"}},G=["value","readonly"],ee=["value","readonly"],te={style:{display:"flex"}},ne=["value"],ae=["value"],le=["value"];function oe(e,t,n,a,o,i){const s=(0,l.up)("el-button"),r=(0,l.up)("el-option"),d=(0,l.up)("el-select"),u=(0,l.up)("el-form-item"),c=(0,l.up)("el-form"),p=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(p,null,{header:(0,l.w5)((()=>[(0,l._)("div",K,[(0,l._)("span",null,(0,m.zw)(e.$t("annotation.geometry.title")),1),(0,l.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("annotation.geometry.advanced")),1)])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Wm)(c,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:e.$t("annotation.geometry.block_size")},{default:(0,l.w5)((()=>[(0,l._)("div",X,[(0,l.Wm)(d,{modelValue:a.blockSizeIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>a.blockSizeIndex=e),onChange:a.updateBlockSize},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.blockSizes,((e,t)=>((0,l.wg)(),(0,l.j4)(r,{key:t,label:e.label,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,l._)("input",{type:"number",value:a.width,class:"el-input el-input--small",readonly:a.bReadonly,onChange:t[1]||(t[1]=(...e)=>a.updateBlockSize_width&&a.updateBlockSize_width(...e))},null,40,G),(0,l._)("input",{type:"number",value:a.height,class:"el-input el-input--small",readonly:a.bReadonly,onChange:t[2]||(t[2]=(...e)=>a.updateBlockSize_height&&a.updateBlockSize_height(...e))},null,40,ee)])])),_:1},8,["label"]),(0,l.Wm)(u,{label:e.$t("annotation.geometry.center")},{default:(0,l.w5)((()=>[(0,l._)("div",te,[(0,l._)("input",{type:"number",min:"0",value:a.center.x,class:"el-input el-input--small",onChange:t[3]||(t[3]=e=>a.store.dispatch("core/updateCenter",{x:parseInt(e.target.value),y:a.center.y,z:a.center.z}))},null,40,ne),(0,l._)("input",{type:"number",min:"0",value:a.center.y,class:"el-input el-input--small",onChange:t[4]||(t[4]=e=>a.store.dispatch("core/updateCenter",{x:a.center.x,y:parseInt(e.target.value),z:a.center.z}))},null,40,ae),(0,l._)("input",{type:"number",min:"0",value:a.center.z,class:"el-input el-input--small",onChange:t[5]||(t[5]=e=>a.store.dispatch("core/updateCenter",{x:a.center.x,y:a.center.y,z:parseInt(e.target.value)}))},null,40,le)])])),_:1},8,["label"])])),_:1})])),_:1})}var ie=n(4870),se={name:"geometryPanel",props:{},setup(){let e=(0,w.oR)(),t=(0,ie.iH)(3);const n=[{label:"64x64x64",value:{width:64,height:64}},{label:"128x128x128",value:{width:128,height:128}},{label:"256x256x128",value:{width:256,height:128}},{label:"256x256x256",value:{width:256,height:256}},{label:"512x512x128",value:{width:512,height:128}},{label:"512x512x256",value:{width:512,height:256}},{label:"512x512x512",value:{width:512,height:512}},{label:"1024x1024x128",value:{width:1024,height:128}},{label:"1024x1024x256",value:{width:1024,height:256}},{label:"1024x1024x512",value:{width:1024,height:512}},{label:"1024x1024x1024",value:{width:1024,height:1024}},{label:"2048x2048x64",value:{width:2048,height:64}},{label:"2048x2048x128",value:{width:2048,height:128}},{label:"2048x2048x256",value:{width:2048,height:256}},{label:"2048x2048x300",value:{width:2048,height:300}},{label:"2048x2048x512",value:{width:2048,height:512}},{label:"2048x2048x1024",value:{width:2048,height:1024}},{label:"4096x4096x32",value:{width:4096,height:32}},{label:"4096x4096x64",value:{width:4096,height:64}},{label:"custom",value:{width:0,height:0}}];let a=(0,l.Fl)((()=>t.value!==n.length-1)),o=(0,l.Fl)((()=>a.value?n[t.value].value.width:e.state.core.blockSize.width)),i=(0,l.Fl)((()=>a.value?n[t.value].value.height:e.state.core.blockSize.height));function s(t){t!==n.length-1&&e.dispatch("core/updateBlockSize",n[t].value)}function r(t){a.value||e.dispatch("core/updateBlockSize",{width:parseInt(t.target.value),height:e.state.core.blockSize.height})}function d(t){a.value||e.dispatch("core/updateBlockSize",{width:e.state.core.blockSize.width,height:parseInt(t.target.value)})}let u=(0,l.Fl)((()=>e.state.core.center));return{store:e,width:o,height:i,bReadonly:a,blockSizeIndex:t,blockSizes:n,updateBlockSize:s,updateBlockSize_width:r,updateBlockSize_height:d,center:u}}};const re=(0,h.Z)(se,[["render",oe],["__scopeId","data-v-caef6760"]]);var de=re;const ue={class:"cardHeader"},ce={style:{display:"flex"}},me={style:{display:"flex"}},pe={style:{display:"flex"}};function fe(e,t,n,a,o,i){const s=(0,l.up)("el-input"),r=(0,l.up)("el-form-item"),d=(0,l.up)("el-option"),u=(0,l.up)("el-select"),c=(0,l.up)("el-color-picker"),p=(0,l.up)("el-form"),f=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(f,null,{header:(0,l.w5)((()=>[(0,l._)("div",ue,[(0,l._)("span",null,(0,m.zw)(e.$t("annotation.selected_node.title")),1)])])),default:(0,l.w5)((()=>[(0,l.Wm)(p,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{label:e.$t("annotation.selected_node.node_id")},{default:(0,l.w5)((()=>[(0,l._)("div",ce,[(0,l.Wm)(s),(0,l.Wm)(s,{placeholder:e.$t("placeholder.searchNodeId")},null,8,["placeholder"])])])),_:1},8,["label"]),(0,l.Wm)(r,{label:e.$t("annotation.selected_node.node_type")},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:"None",value:"1"})])),_:1})])),_:1},8,["label"]),(0,l.Wm)(r,{label:e.$t("annotation.selected_node.message")},{default:(0,l.w5)((()=>[(0,l._)("div",me,[(0,l.Wm)(s,{placeholder:e.$t("placeholder.pressEnter")},null,8,["placeholder"]),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:"Sure",value:"1"})])),_:1})])])),_:1},8,["label"]),(0,l.Wm)(r,{label:e.$t("annotation.selected_node.creator")},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{type:"text"})])),_:1},8,["label"]),(0,l.Wm)(r,{label:e.$t("annotation.selected_node.color")},{default:(0,l.w5)((()=>[(0,l._)("div",pe,[(0,l.Wm)(s,{type:"text"}),(0,l.Wm)(c,{modelValue:a.nodeColor,"onUpdate:modelValue":t[0]||(t[0]=e=>a.nodeColor=e)},null,8,["modelValue"])])])),_:1},8,["label"]),(0,l.Wm)(r,{label:e.$t("annotation.selected_node.coordinate")},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{type:"text"})])),_:1},8,["label"])])),_:1})])),_:1})}var we={name:"currentNodeInfoPanel",props:{name:{type:String}},setup(){const e="#00FF00";return{nodeColor:e}}};const _e=(0,h.Z)(we,[["render",fe]]);var he=_e;const ge={class:"cardHeader"};function ve(e,t,n,a,o,i){const s=(0,l.up)("el-button"),r=(0,l.up)("el-table-column"),d=(0,l.up)("el-table"),u=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(u,null,{header:(0,l.w5)((()=>[(0,l._)("div",ge,[(0,l._)("span",null,(0,m.zw)(e.$t("annotation.special_nodes.title")),1),(0,l._)("div",null,[(0,l.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("annotation.special_nodes.filter")),1)])),_:1}),(0,l.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("annotation.special_nodes.pop")),1)])),_:1})])])])),default:(0,l.w5)((()=>[(0,l.Wm)(d,{border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{label:e.$t("annotation.special_nodes.id")},null,8,["label"]),(0,l.Wm)(r,{label:e.$t("annotation.special_nodes.message")},null,8,["label"])])),_:1})])),_:1})}var be={name:"specialNodePanel",props:{},setup(){return{}}};const xe=(0,h.Z)(be,[["render",ve]]);var ye=xe,ke={name:"annotationPanel",components:{settingsPanel:Q,geometryPanel:de,currentNodeInfoPanel:he,specialNodePanel:ye},setup(){}};const We=(0,h.Z)(ke,[["render",D]]);var ze=We;const Se={class:"panelContainer"};function Ce(e,t,n,a,o,i){const s=(0,l.up)("keyframeSettingsPanel"),r=(0,l.up)("allKeyfamesPanel"),d=(0,l.up)("allFramesPanel"),u=(0,l.up)("scriptPanel"),c=(0,l.up)("el-tab-pane");return(0,l.wg)(),(0,l.j4)(c,{label:e.$t("animation.title")},{default:(0,l.w5)((()=>[(0,l._)("div",Se,[(0,l.Wm)(s,{name:5}),(0,l.Wm)(r,{name:6}),(0,l.Wm)(d,{name:7}),(0,l.Wm)(u,{name:8})])])),_:1},8,["label"])}const $e={class:"cardHeader"};function Ne(e,t,n,a,o,i){const s=(0,l.up)("el-button"),r=(0,l.up)("el-input"),d=(0,l.up)("el-form-item"),u=(0,l.up)("el-form"),c=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(c,null,{header:(0,l.w5)((()=>[(0,l._)("div",$e,[(0,l._)("span",null,(0,m.zw)(e.$t("animation.keyframe.title")),1),(0,l._)("div",null,[(0,l.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.keyframe.new")),1)])),_:1}),(0,l.Wm)(s,{id:"seniorBtn",type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.keyframe.modify")),1)])),_:1})])])])),default:(0,l.w5)((()=>[(0,l.Wm)(u,{"label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:e.$t("animation.keyframe.index_keyframes")},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("animation.keyframe.index_all_frames")},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("animation.keyframe.created_time")},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("animation.keyframe.duration_frames")},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{placeholder:"0"})])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("animation.keyframe.notes")},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["label"])])),_:1})])),_:1})}var Ue={name:"keyframeSettingsPanel",props:{name:{type:String}},setup(){return{}}};const Ie=(0,h.Z)(Ue,[["render",Ne]]);var Pe=Ie;const Le={class:"cardHeader"};function Me(e,t,n,a,o,i){const s=(0,l.up)("el-table-column"),r=(0,l.up)("el-table"),d=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(d,null,{header:(0,l.w5)((()=>[(0,l._)("div",Le,[(0,l._)("span",null,(0,m.zw)(e.$t("animation.all_keyframes.title")),1)])])),default:(0,l.w5)((()=>[(0,l.Wm)(r,{border:"","label-position":"left","label-width":"auto",size:"small",style:{"min-width":"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:e.$t("animation.all_keyframes.index")},null,8,["label"]),(0,l.Wm)(s,{label:e.$t("animation.all_keyframes.created_time")},null,8,["label"]),(0,l.Wm)(s,{label:e.$t("animation.all_keyframes.notes")},null,8,["label"])])),_:1})])),_:1})}var Fe={name:"allKeyfamesPanel",props:{},setup(){return{}}};const je=(0,h.Z)(Fe,[["render",Me]]);var Re=je;const Ee={class:"cardHeader"};function Oe(e,t,n,a,o,i){const s=(0,l.up)("el-slider"),r=(0,l.up)("el-button"),d=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(d,null,{header:(0,l.w5)((()=>[(0,l._)("div",Ee,[(0,l._)("span",null,(0,m.zw)(e.$t("animation.all_frames.title")),1)])])),default:(0,l.w5)((()=>[(0,l.Wm)(s,{modelValue:a.frameIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>a.frameIndex=e),"show-input":"",size:"small"},null,8,["modelValue"]),(0,l.Wm)(r,{type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.all_frames.previous_keyframe")),1)])),_:1}),(0,l.Wm)(r,{type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.all_frames.next_keyframe")),1)])),_:1})])),_:1})}var Be={name:"allFramesPanel",props:{name:{type:String}},setup(){const e=(0,ie.iH)(0);return{frameIndex:e}}};const He=(0,h.Z)(Be,[["render",Oe]]);var Ve=He;const Ae={class:"cardHeader"};function Ze(e,t,n,a,o,i){const s=(0,l.up)("el-input"),r=(0,l.up)("el-button"),d=(0,l.up)("el-form-item"),u=(0,l.up)("el-form"),c=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(c,null,{header:(0,l.w5)((()=>[(0,l._)("div",Ae,[(0,l._)("span",null,(0,m.zw)(e.$t("animation.script.title")),1)])])),default:(0,l.w5)((()=>[(0,l.Wm)(u,{"label-position":"left"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s),(0,l.Wm)(r,{type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.script.browse")),1)])),_:1})])),_:1}),(0,l.Wm)(r,{type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.script.export_template")),1)])),_:1}),(0,l.Wm)(r,{type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.script.reload")),1)])),_:1}),(0,l.Wm)(r,{type:"text"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(e.$t("animation.script.insert_current_state")),1)])),_:1})])),_:1})])),_:1})}var De={name:"scriptPanel",props:{name:{type:String}},setup(){return{}}};const Te=(0,h.Z)(De,[["render",Ze]]);var qe=Te,Ye={name:"animationPanel",components:{keyframeSettingsPanel:Pe,allKeyfamesPanel:Re,allFramesPanel:Ve,scriptPanel:qe},setup(){}};const Je=(0,h.Z)(Ye,[["render",Ce]]);var Qe=Je,Ke={name:"controlPanel",components:{annotationPanel:ze,animationPanel:Qe},setup(){}};const Xe=(0,h.Z)(Ke,[["render",A]]);var Ge=Xe;const et={class:"flexLayout"},tt={key:0,class:"constrast"},nt=["value"],at={class:"wrapper"},lt={id:"viewer",class:"imageContainer",ref:"canvas",width:"1600",height:"1200"},ot={class:"channelBar"},it={class:"channel"},st={key:1,style:{display:"flex","justify-content":"center","background-color":"#313131"}};function rt(e,t,n,o,i,s){const r=(0,l.up)("el-slider"),d=(0,l.up)("channelColorSelector");return(0,l.wg)(),(0,l.iD)("div",et,[o.store.state.core.bLoaded?((0,l.wg)(),(0,l.iD)("div",tt,[(0,l.Wm)(r,{modelValue:o.lower,"onUpdate:modelValue":t[0]||(t[0]=e=>o.lower=e),"show-input":"",size:"small",debounce:100,max:o.upper,onWheel:o.lHandler},null,8,["modelValue","max","onWheel"]),(0,l.Wm)(r,{modelValue:o.upper,"onUpdate:modelValue":t[1]||(t[1]=e=>o.upper=e),"show-input":"",size:"small",debounce:100,max:65535,onWheel:o.uHandler},null,8,["modelValue","onWheel"]),(0,l._)("input",{type:"number",value:o.gamma,style:{height:"auto",width:"20px","text-align":"center"},readonly:"true"},null,8,nt)])):(0,l.kq)("",!0),(0,l.wy)((0,l._)("div",at,[(0,l._)("canvas",lt,null,512),(0,l._)("div",ot,[(0,l._)("div",it,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.store.state.core.channels,((e,t)=>((0,l.wg)(),(0,l.j4)(d,{key:t,"channel-index":e.index,"channel-color":o.rgbToHex(e.color),"change-handler":o.updateColor,"change-visibility":o.updateVisibility},null,8,["channel-index","channel-color","change-handler","change-visibility"])))),128))])])],512),[[a.F8,o.store.state.core.bLoaded]]),o.store.state.core.bLoaded?((0,l.wg)(),(0,l.iD)("div",st,[(0,l.Wm)(r,{modelValue:o.currentLevel,"onUpdate:modelValue":t[2]||(t[2]=e=>o.currentLevel=e),"show-input":"","show-input-controls":!1,debounce:100,max:o.store.state.core.levels,min:1,size:"small"},null,8,["modelValue","max"])])):(0,l.kq)("",!0)])}const dt=["id"],ut=["for"];function ct(e,t,n,o,i,s){return(0,l.wg)(),(0,l.iD)("div",{class:"color-input-wrapper",onContextmenu:t[1]||(t[1]=(0,a.iM)((e=>o.updateChannelVisibility(n.channelIndex)),["right"]))},[(0,l.wy)((0,l._)("input",{type:"color",id:"color-input"+n.channelIndex,class:"color-input",style:(0,m.j5)(o.isActive),"onUpdate:modelValue":t[0]||(t[0]=e=>o.color=e)},null,12,dt),[[a.nr,o.color]]),(0,l._)("label",{for:"color-input"+n.channelIndex,class:"color-label"},(0,m.zw)("C"+n.channelIndex),9,ut)],32)}var mt={name:"channelColorSelector",props:["channelIndex","channelColor","changeHandler","changeVisibility"],setup(e){let t=(0,ie.iH)(e.channelColor),n=(0,ie.iH)(!0);(0,l.YP)(t,(t=>{"function"===typeof e.changeHandler&&e.changeHandler(e.channelIndex,t)}));let a=(0,l.Fl)((()=>(console.log(n),n.value?"border-color: #00FF00":"border-color: #FFFFFF")));function o(t){"function"===typeof e.changeVisibility&&(e.changeVisibility(t,!n.value),n.value=!n.value)}return{color:t,updateChannelVisibility:o,isActive:a}}};const pt=(0,h.Z)(mt,[["render",ct],["__scopeId","data-v-e4826f94"]]);var ft=pt,wt={name:"viewerPanel",components:{channelColorSelector:ft},setup(){const e=(0,ie.iH)(null),t=(0,w.oR)(),n=(0,l.Fl)({get:()=>t.state.core.currentLevel+1,set:e=>t.dispatch("core/updateResolution",e)}),a=(0,l.Fl)({get:()=>t.state.core.contrastRange.lower,set:e=>{s(e,o.value)}}),o=(0,l.Fl)({get:()=>t.state.core.contrastRange.upper,set:e=>s(a.value,e)}),i=(0,l.Fl)((()=>t.state.core.channels[0].gamma));function s(e,n){t.dispatch("core/updateChannelContrast",{lower:e,upper:n})}function r(e){e.deltaY>0?a.value-=1:a.value+=1}function d(e){e.deltaY>0?o.value-=1:o.value+=1}let u=Promise.resolve();function c(e){return u=u.then(e),u}function m(e){return new Promise(((t,n)=>{window.cefQuery({request:JSON.stringify(e),onSuccess:function(e){window.showMessage(e),t()},onFailure:function(e,t){window.showMessage(e+": "+t),n()}})}))}const p=function(e){let t={};return t["Shift"]=e.shiftKey,t["Control"]=e.ctrlKey,t},f=function(e){let t={A:0,B:1,D:2,F:3,R:4,V:5,X:6,Z:7,ARROWLEFT:8,ARROWRIGHT:9," ":10,HOME:11,END:12,ARROWUP:13,ARROWDOWN:14,DELETE:15,ESCAPE:16},n=t[e.key.toUpperCase()];return n};function _(e,t,n){let a={functionName:"mousePressEvent",args:{button:e.button,posX:e.offsetX*t,posY:e.offsetY*n,modifier:p(e)}};c(m(a))}function h(e,t,n){let a={functionName:"mouseReleaseEvent",args:{button:e.button,posX:e.offsetX*t,posY:e.offsetY*n,modifier:p(e)}};c(m(a))}function g(e,t,n){let a=0;switch(e.buttons){case 1:a=0;break;case 2:a=2;break;case 4:a=1;break;default:a=0;break}let l={functionName:"mouseMoveEvent",args:{button:a,posX:e.offsetX*t,posY:e.offsetY*n,modifier:p(e)}};c(m(l))}function v(e,t,n){let a={functionName:"wheelEvent",args:{deltaY:-e.deltaY,posX:e.offsetX*t,posY:e.offsetY*n}};c(m(a))}function b(e){let t={functionName:"keyPressEvent",args:{key:f(e),modifier:p(e),bAutoRepeat:e.repeat}};c(m(t))}function x(e){let t={functionName:"keyReleaseEvent",args:{key:f(e),modifier:p(e),bAutoRepeat:e.repeat}};c(m(t))}function y(e){let t=e.split(" ").map(Number),n=t.map((e=>{let t=(255*e).toString(16);return 1===t.length?"0"+t:t}));return[n[0],n[2]]=[n[2],n[0]],"#"+n.join("")}function k(e,n){t.dispatch("core/updateChannelColor",{index:e,color:n})}function W(e,n){t.dispatch("core/updateChannelVisibility",{index:e,visible:n})}return(0,l.bv)((()=>{let t=e.value,n=t.width/t.offsetWidth,a=t.height/t.offsetHeight,l=new ResizeObserver((()=>{window.requestAnimationFrame((()=>{n=t.width/t.offsetWidth,a=t.height/t.offsetHeight}))}));l.observe(t),t.addEventListener("mousedown",(e=>{_(e,n,a)}),!1),t.addEventListener("mouseup",(e=>{h(e,n,a)}),!1),t.addEventListener("mousemove",(e=>{g(e,n,a)}),!1),t.addEventListener("wheel",(e=>{v(e,n,a)}),!1),window.addEventListener("keydown",b,!1),window.addEventListener("keyup",x,!1)})),(0,l.Jd)((()=>{let t=e.value,n=t.width/t.offsetWidth,a=t.height/t.offsetHeight;t.removeEventListener("mousedown",(e=>{_(e,n,a)}),!1),t.removeEventListener("mouseup",(e=>{h(e,n,a)}),!1),t.removeEventListener("mousemove",(e=>{g(e,n,a)}),!1),t.removeEventListener("wheel",(e=>{v(e,n,a)}),!1),window.removeEventListener("keydown",b,!1),window.removeEventListener("keyup",x,!1)})),{gamma:i,canvas:e,store:t,currentLevel:n,lower:a,upper:o,lHandler:r,uHandler:d,rgbToHex:y,updateColor:k,updateVisibility:W}}};const _t=(0,h.Z)(wt,[["render",rt],["__scopeId","data-v-278b944a"]]);var ht=_t,gt=n(3625),vt={name:"mainPage",components:{appHeader:V,controlPanel:Ge,viewerPanel:ht},mounted(){(0,gt.Z)(["#split-0","#split-1"],{sizes:[70,30],minSize:300,gutterSize:1,direction:"horizontal",cursor:"col-resize"})}};const bt=(0,h.Z)(vt,[["render",d],["__scopeId","data-v-209f4294"]]);var xt=bt,yt={name:"App",components:{mainPage:xt},setup(){const e=(0,w.oR)();return document.addEventListener("contextmenu",(function(e){e.preventDefault()})),{store:e}}};const kt=(0,h.Z)(yt,[["render",o]]);var Wt=kt,zt=n(5243),St=(n(4415),n(7853)),Ct={file:{title:"文件",load_project:"加载工程文件",save:"保存工程",save_as:"工程另存为...",open_image_file:"打开图像文件",open_image_as_sps:"以sps形式打开图像",import_nodes:"导入节点",import_parameters:"导入参数",show_image_information:"图像信息",export_nodes:{title:"导出节点",imaris_format:"Imaris格式",lychnis_format:"Lychnis格式",swc_format:"swc格式",imaris_spots:"Imaris spots格式"},export_animation:"生成动画",export_volume:"导出图像"},edit:{title:"编辑",move_slice_by_node:"根据节点移动脑片",move_selected_node:"移动选中的节点",create_anchor_nodes:"创建定位节点",delete_nodes:{title:"删除节点",selected_node:"选中的节点",all_nodes_on_selected_fiber:"选中的纤维上所有节点",all_nodes_of_selected_type:"选中节点类型的所有节点",all_nodes:"所有节点"},build_node_groups:"生成节点分组",review_nodes:"节点检查",move_to_pending_node:"移动到下一个待标注节点"},view:{title:"视图",show_hide_all_fibers:"显示/隐藏所有节点",show_hide_unselected_fibers:"显示/隐藏未选中的节点",show_hide_current_volume:"显示/隐藏当前图像块",show_hide_roi_volumes:"显示/隐藏ROI数据块",roi_settings:"ROI设置",toggle_auto_loading:"切换自动加载",display_settings:"显示设置",turn_on_off_annotation_mode:"开启/关闭标注模式"},help:{title:"帮助",about:"关于",language:"语言"},annotation:{title:"标注通道",settings:{title:"设置",annotation_channel:"标注通道",annotation_type:"标注类型",slice_thickness:"切片厚度",user_name:"用户名"},geometry:{title:"位置与坐标",advanced:"高级",block_size:"数据块大小",center:"中心"},selected_node:{title:"当前节点信息",node_id:"编号",node_type:"类型",message:"信息",creator:"创建者",color:"颜色",coordinate:"坐标"},special_nodes:{title:"特殊节点",filter:"过滤",pop:"弹出",id:"编号",message:"信息"},type:{title:"类型",line:"线段",point:"点",moveSelectedNode:"移动选中的节点"}},animation:{title:"动画",keyframe:{title:"关键帧",new:"新建",modify:"修改",index_keyframes:"序号（关键帧）",index_all_frames:"序号（所有帧）",created_time:"创建时间",duration_frames:"时长（帧数）*",notes:"备注*"},all_keyframes:{title:"所有关键帧",index:"序号",created_time:"创建时间",notes:"备注"},all_frames:{title:"所有帧",previous_keyframe:"上一个关键帧",next_keyframe:"下一个关键帧"},script:{title:"脚本",browse:"浏览",export_template:"导出模板",reload:"重新加载",insert_current_state:"添加当前状态"}},placeholder:{searchNodeId:"搜索的节点编号",pressEnter:"输入完成后按回车键"}},$t={file:{title:"File",load_project:"Load project",save:"Save project",save_as:"Save project as...",open_image_file:"Open image file",open_image_as_sps:"Open image as sps",import_nodes:"Import nodes",import_parameters:"Import parameters",show_image_information:"Show image information",export_nodes:{title:"Export nodes to file",imaris_format:"Imaris format",lychnis_format:"Lychnis format",swc_format:"swc format",imaris_spots:"Imaris spots"},export_animation:"Export animation",export_volume:"Export volume"},edit:{title:"Edit",move_slice_by_node:"Move slice by node",move_selected_node:"Move selected node",create_anchor_nodes:"Create anchor nodes",delete_nodes:{title:"Delete nodes",selected_node:"Selected node",all_nodes_on_selected_fiber:"All nodes on selected fiber",all_nodes_of_selected_type:"All nodes of selected type",all_nodes:"All nodes"},build_node_groups:"Build node groups",review_nodes:"Review nodes",move_to_pending_node:"Move to pending node"},view:{title:"View",show_hide_all_fibers:"Show/Hide all fibers",show_hide_unselected_fibers:"Show/Hide unselected fibers",show_hide_current_volume:"Show/Hide current volume",show_hide_roi_volumes:"Show/Hide ROI volumes",roi_settings:"ROI settings",toggle_auto_loading:"Toggle auto loading",display_settings:"Display settings",turn_on_off_annotation_mode:"Turn on/off annotation mode"},help:{title:"Help",about:"About",language:"Language"},annotation:{title:"Annotation",settings:{title:"Settings",annotation_channel:"Annotation channel",annotation_type:"Annotation type",slice_thickness:"Slice thickness",user_name:"User name"},geometry:{title:"Geometry",advanced:"Advanced",block_size:"Block size",center:"Center"},selected_node:{title:"Selected node",node_id:"Node ID",node_type:"Node type",message:"Message",creator:"Creator",color:"Color",coordinate:"Coordinate"},special_nodes:{title:"Special nodes",filter:"Filter",pop:"Pop",id:"ID",message:"Message"},type:{title:"Type",line:"Line",point:"Point",moveSelectedNode:"Move selected node"}},animation:{title:"Animation",keyframe:{title:"Keyframe",new:"New",modify:"Modify",index_keyframes:"Index (Keyframes)",index_all_frames:"Index (All frames)",created_time:"Created time",duration_frames:"Duration (frames)*",notes:"Notes*"},all_keyframes:{title:"All keyframes",index:"Index",created_time:"Created time",notes:"Notes"},all_frames:{title:"All frames",previous_keyframe:"Previous keyframe",next_keyframe:"Next keyframe"},script:{title:"Script",browse:"Browse",export_template:"Export template",reload:"Reload",insert_current_state:"Insert current state"}},placeholder:{searchNodeId:"Search node ID",pressEnter:"Press Enter when done"}};const Nt={zhCn:Ct,en:$t},Ut=new St.o({locale:"en",messages:Nt});var It=Ut;const Pt={namespaced:!0,state(){return{message:"Status",bShow:!0}},mutations:{showMessage(e,t){e.message=t,e.bShow=!0,setTimeout((()=>{e.bShow=!1}),5e3)}}};var Lt=Pt,Mt=n(814),Ft=n(7392);const jt={namespaced:!0,state(){return{language:"en",I18N:It,bLoaded:!1,levels:1,currentLevel:0,contrastRange:{lower:100,upper:1e3},center:{x:0,y:0,z:0},blockSize:{width:256,height:256},channels:[]}},mutations:{setLanguage(e,t){e.language=t},setI18N(e,t){e.I18N.global.locale=t},setBLoaded(e,t){e.bLoaded=t},setResolution(e,t){e.levels=t.totalResolutions,e.currentLevel=t.currentResolution},setCurrentLevel(e,t){e.currentLevel=t},setCenter(e,t){e.center.x=t.x,e.center.y=t.y,e.center.z=t.z},setBlockSize(e,t){e.blockSize.width=t.width,e.blockSize.height=t.height},setChannels(e,t){e.channels=t},setChannelColor(e,t){e.channels[t.index].color=t.color},setChannelVisibility(e,t){e.channels[t.index].visible=t.visible},setChannelContrast(e,t){for(let n of e.channels)n.contrast=t.lower+" "+t.upper;e.contrastRange.lower=t.lower,e.contrastRange.upper=t.upper}},actions:{updateResolution(e,t){if(0==e.state.bLoaded)return;let n={functionName:"updateResolution",args:{resId:t}};window.cefQuery({request:JSON.stringify(n),onSuccess:function(n){window.showMessage("Resolution change: "+n),e.commit("setCurrentLevel",t-1)},onFailure:function(e,t){window.showMessage(e+": "+t)}})},updateBlockSize(e,t){if(0==e.state.bLoaded)return;let n={functionName:"updateBlockSize",args:{blockSize:t}};window.cefQuery({request:JSON.stringify(n),onSuccess:function(n){window.showMessage("Block size change: "+n),e.commit("setBlockSize",t)},onFailure:function(e,t){window.showMessage(e+": "+t)}})},updateCenter(e,t){if(0==e.state.bLoaded)return;let n={functionName:"updateCenter",args:{center:t}};window.cefQuery({request:JSON.stringify(n),onSuccess:function(n){window.showMessage("Center change: "+n),e.commit("setCenter",t)},onFailure:function(e,t){window.showMessage(e+": "+t)}})},updateChannelColor(e,t){if(console.log(t),0==e.state.bLoaded)return;function n(e){let t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16);return[a,n,t]}let a=n(t.color),l={functionName:"updateChannelColor",args:{index:t.index,r:a[0],g:a[1],b:a[2],gamma:e.state.channels[t.index].gamma}};window.cefQuery({request:JSON.stringify(l),onSuccess:function(n){window.showMessage("Channel color change: "+n),e.commit("setChannelColor",{index:t.index,color:a[0]/255+" "+a[1]/255+" "+a[2]/255})},onFailure:function(e,t){window.showMessage(e+": "+t)}})},updateChannelVisibility(e,t){if(0==e.state.bLoaded)return;let n={functionName:"updateChannelVisibility",args:{index:t.index,visible:t.visible}};window.cefQuery({request:JSON.stringify(n),onSuccess:function(n){window.showMessage("Channel visibility change: "+n),e.commit("setChannelVisibility",{index:t.index,visible:t.visible})},onFailure:function(e,t){window.showMessage(e+": "+t)}})},updateChannelContrast(e,t){if(0==e.state.bLoaded)return;let n={functionName:"updateChannelContrast",args:{lower:t.lower,upper:t.upper}};window.cefQuery({request:JSON.stringify(n),onSuccess:function(n){window.showMessage("Channel contrast change: "+n),e.commit("setChannelContrast",t)},onFailure:function(e,t){window.showMessage(e+": "+t)}})}},getters:{locale(e){return"zhCn"===e.language?Mt.Z:Ft.Z}}};var Rt=jt;const Et=(0,w.MT)({modules:{status:Lt,core:Rt}});var Ot=Et;let Bt=Promise.resolve();window.paint=function(e){Bt=Bt.then((()=>new Promise((t=>{let n=new Blob([e],{type:"image/jpeg"}),a=new Image;a.src=URL.createObjectURL(n),a.onload=function(){let e=document.getElementById("viewer"),n=e.getContext("2d"),l=new OffscreenCanvas(e.width,e.height),o=l.getContext("2d");o.imageSmoothingEnabled=!0,o.drawImage(a,0,0),requestAnimationFrame((()=>{n.drawImage(l,0,0)})),t()}}))))},window.showMessage=function(e){Ot.commit("status/showMessage",e)},window.setInfos=function(e){let t=JSON.parse(e);for(let n in t){let e="core/set"+n;Ot.commit(e,t[n])}};const Ht=(0,a.ri)(Wt);Ht.use(zt.Z,{locale:Ot.getters["core/locale"]}),Ht.use(Ot),Ht.use(It),Ht.mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,o){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],o=e[u][2];for(var s=!0,r=0;r<a.length;r++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[r])}))?a.splice(r--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var d=l();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,l,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,o,i=a[0],s=a[1],r=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(r)var u=r(n)}for(t&&t(a);d<i.length;d++)o=i[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},a=self["webpackChunklychnis_web_app"]=self["webpackChunklychnis_web_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(268)}));a=n.O(a)})();
//# sourceMappingURL=app.d01468c7.js.map